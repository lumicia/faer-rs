when:
  - event: pull_request
  - event: push
    branch: main
steps:
  - name: tests
    image: rust

    environment:
      CARGO_TERM_COLOR: always
      CI: 1
      FAER_FFI: 1
    commands:
      - rustup toolchain install nightly
      - rustup default nightly
      - cargo install cargo-nextest --locked
      - cd faer && cargo nextest run --features=unstable && cd ..
      - cd faer-ffi && cargo build && cd ..
